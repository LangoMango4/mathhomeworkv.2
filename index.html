<!DOCTYPE html>
<html lang="en">
<head>
<link rel="icon" type="image/png" href="titleico.png">
<meta charset="UTF-8" />
<title>Internet Security by Zscaler</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />

<style>
/* ===== Base ===== */
body{margin:0;background:#e3e3e3;font-family:Arial,sans-serif;font-size:12px;color:#4B4F54}
a{cursor:pointer;text-decoration:none;color:#009dd0}
img{max-height:75px;max-width:430px}

/* ===== Zscaler layout scaffolding ===== */
.pg{position:absolute;inset:0;overflow-x:hidden;white-space:nowrap}
.pg:before{content:"";display:inline-block;height:100%;vertical-align:middle}
.pg_cont{display:inline-block;vertical-align:middle;width:100%;position:relative}
.m_tbl{width:100%;max-width:758px;background:#e3e3e3;min-width:600px}
.logo_container{position:relative;max-width:758px;margin:0 auto 15px}
hr{margin:0;border:0;border-top:0.5px solid #cfd0d1}

/* ===== One red rounded rectangle on the inner table ===== */
#en_US{
  border:3px solid #fd4239;
  border-radius:10px;
  border-collapse:separate;
  border-spacing:0;
  background:#fff;
  overflow:hidden; /* clip inner corners and hr */
}
/* Remove any legacy per-row borders */
.pg.red .eu_h,.pg.red .eu_co,.pg.red td.hr{border:0!important}

/* ===== Cells & header ===== */
.m_tbl table td{padding:0 20px 16px 20px;text-align:left;background:#fff}
.m_tbl table td.eu_h{padding-top:16px}

/* Header: Arial 24px, weight 400, left with icon */
.eu_h{
  background:#fff;
  font-family:Arial, sans-serif;
  font-size:24px;
  font-weight:400;
  color:#fd4239;
  text-align:left;
  padding:16px 18px 14px;
  display:flex;
  align-items:center;
  gap:10px;
}
.eu_h img.no-icon{
  width:24px; height:26px;
  display:inline-block; vertical-align:middle;
}

.eu_co{font-size:16px;color:#2a2c30;white-space:normal;word-wrap:break-word}
.eu_co.rsn{color:#000}

/* Footer row with D-code inside on the right */
.eu_co.fo{
  height:32px;color:#696A6D;background:#f3f3f3;line-height:32px;font-size:11px;
  padding:0 20px;
  display:flex; align-items:center; justify-content:space-between; gap:8px;
}
.uq_cd{font-size:10px;color:#696A6D;white-space:nowrap;margin-left:12px}

/* Disclaimer (outside the red box) */
.eu_co.st{
  font-size:12px;padding:0.1px;line-height:20px;color:#939393;background:#e3e3e3;border:0;text-align:center
}

/* Smaller screens */
@media(max-width:700px){
  .eu_h{font-size:20px}
  .m_tbl{min-width:300px;width:95%}
}

/* ===== PIN/Login ===== */
#pinScreen{position:fixed;inset:0;background:#0b0e14;display:none;align-items:center;justify-content:center;z-index:10}
#pinBox{background:#0f111a;padding:30px;border-radius:18px;box-shadow:0 6px 20px rgba(0,0,0,.6);color:#eef3ff;width:min(92vw,420px);text-align:center}
#pinBox h2{margin:0 0 16px 0;color:#eef3ff;font-weight:600}
#pinInput{padding:12px;font-size:18px;border-radius:10px;border:1px solid #1d2a55;width:100%;background:#0e1630;color:#eef3ff;text-align:center;margin-bottom:12px}
.btn{appearance:none;border:1px solid #4a4e5a;background:#17224a;color:#eef3ff;padding:12px 20px;border-radius:12px;cursor:pointer;font-weight:600;font-size:15px}
.btn:hover{background:#1b2a5c}
.btn-ghost{background:transparent;border:1px solid #37457a;color:#c7d2ff;padding:10px 16px;border-radius:10px}
.btn-ghost:hover{background:#1a244a}
#pinError{color:#ffcc00;display:none;margin-top:10px}

/* ===== Terms ===== */
#termsScreen{position:fixed;inset:0;background:#0b0e14;display:none;align-items:center;justify-content:center;z-index:15}
#termsBox{background:#0f111a;border:1px solid #1d2a55;border-radius:18px;width:min(92vw,720px);max-height:min(90vh,780px);color:#eef3ff;box-shadow:0 10px 30px rgba(0,0,0,.5);display:flex;flex-direction:column}
#termsHead{padding:18px 20px;border-bottom:1px solid #1d2a55;font-weight:700;font-size:18px;display:flex;flex-direction:column;gap:4px}
#termsSub{font-size:11px;color:#a7b1d6}
#termsDesc{font-size:12px;color:#b9c2e8}
#termsBody{padding:16px 20px;overflow:auto;font-size:14px;line-height:1.6;max-height:300px;position:relative}
#scrollHint{position:sticky;bottom:0;display:flex;justify-content:center}
#scrollHint>div{background:rgba(87,111,201,.15);color:#c7d2ff;border:1px solid rgba(87,111,201,.35);padding:6px 10px;border-radius:999px;font-size:12px;backdrop-filter:blur(2px)}
#termsFoot{padding:14px 20px;border-top:1px solid #1d2a55;display:flex;gap:10px;justify-content:flex-end;align-items:center;flex-wrap:wrap}
.check-row{display:flex;align-items:center;gap:8px;margin-right:auto}
.check-row input{width:16px;height:16px}
.check-row label{font-size:13px}

/* ===== Main content placeholder (hidden until unlocked) ===== */
#mainContent{display:none;max-width:1100px;margin:40px auto;padding:20px;color:#eef3ff}
.card{background:#0f111a;border:1px solid #1d2a55;border-radius:18px;box-shadow:0 10px 40px rgba(0,0,0,.25);padding:22px;text-align:center}
iframe{margin:20px 0;border-radius:12px;box-shadow:0 6px 16px rgba(0,0,0,.3)}
</style>
</head>
<body>

<!-- ===== Zscaler block ===== -->
<div class="pg red">
  <div class="pg_cont">

    <div class="logo_container" style="text-align:center;">
      <img src="cnslogo.png" alt="CNS Logo">
    </div>

    <table class="m_tbl" cellpadding="0" cellspacing="0" align="center">
      <tbody>
        <tr>
          <td valign="top">
            <!-- Red rounded rectangle -->
            <table id="en_US" width="100%" border="0" cellspacing="0" cellpadding="0">
              <tbody>
                <tr>
                  <td class="eu_h">
                    <img src="no.png" class="no-icon" alt="No">
                    <span>Sorry, you don't have permission to visit this site.</span>
                  </td>
                </tr>

                <tr><td><hr></td></tr>

                <tr><td class="eu_co"><b>Website blocked</b></td></tr>

                <tr>
                  <td class="eu_co rsn">
                    Not allowed to browse <b>SAR URL Blacklist Students</b> category.
                  </td>
                </tr>

                <tr>
                  <td class="eu_co">
                    You tried to visit:
                    <a href="#" style="color:#009dd0">www.mymathshomework.com</a>
                  </td>
                </tr>

                <tr><td><hr></td></tr>

                <tr>
                  <td class="eu_co fo">
                    <span>Need help? Contact our support team at 0740509750,
                      <a href="#" id="toMainArea" style="font-size:12px;color:#009dd0;">servicedesk@cns.catholic.edu.au</a>
                    </span>
                    <span class="uq_cd">D55</span>
                  </td>
                </tr>
              </tbody>
            </table>

            <!-- Disclaimer OUTSIDE the red box -->
            <div class="eu_co st" style="max-width:750px;margin:8px auto 0;">
              <img src="image-removebg-preview (5).png" class="Zscaler-icon" alt="Zscaler" style="width:70px;height:35px;vertical-align:middle;margin-right:6px;transform:translateY(-2px)">
              Your organization has selected Zscaler to protect you from internet threats.
            </div>
          </td>
        </tr>
      </tbody>
    </table>

  </div>
</div>

<!-- ===== PIN/Login Screen ===== -->
<div id="pinScreen">
  <div id="pinBox">
    <h2>Enter PIN or Password</h2>
    <div class="eu_co st" style="background:#0f111a;border:0;color:#b9c2e8;padding:0 0 6px 0">
      Password is changed every week for security.
    </div>
    <input id="pinInput" type="password" maxlength="64" placeholder="PIN / Password">
    <br />
    <button class="btn" onclick="checkPin()">Unlock</button>
    <p id="pinError">Error! Do you have the correct PIN? Password is changed every week.</p>
  </div>
</div>

<!-- ===== Terms & Conditions ===== -->
<div id="termsScreen" aria-modal="true" role="dialog">
  <div id="termsBox">
    <div id="termsHead">
      <div>üõ°Ô∏è Terms &amp; Conditions</div>
      <div id="termsSub">Last Updated: Sept. 17 2025</div>
      <div id="termsDesc">Please read and scroll to the bottom to enable acceptance.</div>
        <a href="terms_and_conditions" style="color:#009dd0">www.mymathshomework.com</a>
    </div>

    <div id="termsBody">
      <div class="content">
        <p><b>Welcome!</b> Please review and accept these terms to continue.</p>
        <p><b>CES Guideline Compliance:</b> Users must agree to follow all Catholic Education Services (CES) Cairns guidelines while using this website.</p>
        <p><b>Disclaimer of Responsibility:</b> The creator of this website is not responsible for any consequences or disciplinary actions.</p>
        <p><b>Usage Guidelines:</b> This website is intended for educational and entertainment purposes only.</p>
        <p><b>Privacy & Data:</b> Data or scores may be reset at any time without notice.</p>
        <p><b>Inactivity Policy:</b> You‚Äôll be logged out after 10 minutes of inactivity.</p>
        <p><b>Emergency Shortcuts:</b> Press Escape then T to quickly navigate away.</p>
        <p><b>Screen Locking Disclaimer:</b> We are not liable for any unsaved progress when the screen is locked.</p>
        <p><b>IT Notice:</b> IT can monitor school devices; we are not liable for consequences of your actions.</p>
        <p><b>Changes to Terms:</b> Terms may change at any time without notice.</p>
        <p><b>School Work:</b> We are not responsible for lost or incomplete work.</p>
        <p><b>Sharing:</b> Do not share the site without permission.</p>
        <p class="border-top"><b>Acknowledgment:</b> By scrolling to the bottom and accepting these terms, you agree to be bound by them.</p>
        <p>Credits to skibidi._fish - 2025</p>
      </div>
      <div id="scrollHint"><div>‚Üì Scroll to continue ‚Üì</div></div>
    </div>

    <div id="termsFoot">
      <div class="check-row">
        <input type="checkbox" id="termsChk" disabled>
        <label for="termsChk" id="termsLbl">Please scroll to the bottom to enable this checkbox</label>
      </div>
      <button class="btn-ghost" id="declineBtn">Decline</button>
      <button class="btn" id="acceptBtn" disabled>Accept and Continue</button>
    </div>
  </div>
</div>

<!-- ===== Main Content (hidden until unlocked) ===== -->
<div id="mainContent">
  <div class="card">
    <h1>mathshomework v2 üò±</h1>
    <div style="margin-bottom:30px;">
      <button class="btn" onclick="showPage('soundboard')">Soundboard</button>
      <button class="btn" onclick="showPage('games')">Games</button>
      <button class="btn" onclick="reopenTerms()" title="View terms again">View Terms</button>
    </div>
    <div id="soundboardPage">Soundboards Coming Soon</div>
    <div id="gamesPage" style="display:none;">
      <iframe src="https://scratch.mit.edu/projects/3041905/embed" allowtransparency="true" width="960" height="720" frameborder="0" scrolling="no" allowfullscreen></iframe>
      <iframe src="https://scratch.mit.edu/projects/17828009/embed" allowtransparency="true" width="960" height="720" frameborder="0" scrolling="no" allowfullscreen></iframe>
      <iframe src="https://www.onlinegames.io/games/2023/code/four-colors/index.html" style="width:960px; height:720px; border:0; margin:0; padding:0;" scrolling="no" allowfullscreen></iframe>
      <iframe src="https://y8.com/embed/slope" scrolling="no" style="width:960px; height:641px; border:0; margin:0; padding:0;" allowfullscreen></iframe>
      <iframe src="https://scratch.mit.edu/projects/389464290/embed" allowtransparency="true" width="960" height="720" frameborder="0" scrolling="no" allowfullscreen></iframe>
      <iframe src="https://scratch.mit.edu/projects/105500895/embed" allowtransparency="true" width="960" height="720" frameborder="0" scrolling="no" allowfullscreen></iframe>
      <iframe src="https://scratch.mit.edu/projects/12575620/embed" allowtransparency="true" width="960" height="720" frameborder="0" scrolling="no" allowfullscreen></iframe>
      
    </div>
  </div>
</div>

<script>
/* ===== Config ===== */
const VALID_PINS = ["14312","24680"];
const LS_TERMS = "termsAccepted_v1";
const TERMS_VERSION = "Sept. 17 2025.";

/* ===== Page switching ===== */
function showPage(which){
  document.getElementById("soundboardPage").style.display = (which==="soundboard")?"block":"none";
  document.getElementById("gamesPage").style.display = (which==="games")?"block":"none";
}

/* ===== Login -> Terms -> Main ===== */
function checkPin(){
  const pin = (document.getElementById("pinInput").value || "").trim();
  if (!pin || !VALID_PINS.includes(pin)){
    document.getElementById("pinError").style.display="block";
    return;
  }
  document.getElementById("pinError").style.display="none";
  document.getElementById("pinScreen").style.display="none";
  try {
    const accepted = localStorage.getItem(LS_TERMS) === "yes";
    if (accepted){
      document.getElementById("mainContent").style.display="block";
      startInactivityTimer();
    } else {
      document.getElementById("termsScreen").style.display="flex";
    }
  } catch(_){
    document.getElementById("termsScreen").style.display="flex";
  }
}

/* ===== Terms logic ===== */
const termsBody = document.getElementById("termsBody");
const termsChk  = document.getElementById("termsChk");
const termsLbl  = document.getElementById("termsLbl");
const acceptBtn = document.getElementById("acceptBtn");
const declineBtn= document.getElementById("declineBtn");
const scrollHint= document.getElementById("scrollHint");
let hasScrolledToBottom=false, isLogging=false;

function updateAcceptUI(){ acceptBtn.disabled = !(termsChk.checked && hasScrolledToBottom) || isLogging; }

termsBody.addEventListener("scroll", () => {
  const { scrollTop, scrollHeight, clientHeight } = termsBody;
  if (scrollTop >= (scrollHeight - clientHeight - 5)) {
    hasScrolledToBottom = true;
    termsChk.disabled = false;
    termsLbl.textContent = "I understand and accept that I am using this site at my own risk";
    scrollHint.style.display = "none";
    updateAcceptUI();
  }
});
termsChk.addEventListener("change", updateAcceptUI);

acceptBtn.addEventListener("click", async () => {
  if (!hasScrolledToBottom || !termsChk.checked || isLogging) return;
  isLogging = true; updateAcceptUI();
  try{
    await fetch("/api/terms/accept", {
      method:"POST", headers:{"Content-Type":"application/json"},
      body:JSON.stringify({ version: TERMS_VERSION, method:"web" })
    }).catch(()=>{});
  }catch(_){}
  try{ localStorage.setItem(LS_TERMS,"yes"); }catch(_){}
  document.getElementById("termsScreen").style.display="none";
  document.getElementById("mainContent").style.display="block";
  startInactivityTimer();
  isLogging=false; updateAcceptUI();
});
declineBtn.addEventListener("click", () => {
  document.getElementById("termsScreen").style.display="none";
  document.getElementById("mainContent").style.display="none";
  document.querySelector(".pg.red").style.display="block";
});
function reopenTerms(){ document.getElementById("termsScreen").style.display="flex"; }

/* Footer link ‚Üí open PIN/login */
document.addEventListener("DOMContentLoaded", () => {
  const toMain = document.getElementById("toMainArea");
  if (toMain){
    toMain.addEventListener("click", (e) => {
      e.preventDefault();
      document.querySelector(".pg.red").style.display="none";
      document.getElementById("pinScreen").style.display="flex";
    });
  }
});

/* ===== ESC + T shortcut ===== */
let escPressed=false;
document.addEventListener("keydown", (e) => {
  if (e.key === "Escape"){ escPressed = true; setTimeout(()=>{escPressed=false},1000); }
  if (escPressed && (e.key === "t" || e.key === "T")) { window.location.href = "https://www.google.com"; }
});

/* ===== Inactivity lock (10 min) ===== */
let inactivityTimer;
function resetInactivity(){
  clearTimeout(inactivityTimer);
  inactivityTimer = setTimeout(() => {
    document.getElementById("mainContent").style.display="none";
    document.getElementById("pinScreen").style.display="none";
    document.getElementById("termsScreen").style.display="none";
    document.querySelector(".pg.red").style.display="block";
  }, 10*60*1000);
}
function startInactivityTimer(){
  resetInactivity();
  document.addEventListener("mousemove", resetInactivity);
  document.addEventListener("keydown", resetInactivity);
}

/* ===== Block DevTools & View Source ===== */
document.addEventListener("keydown", (e) => {
  if (e.key === "F12"){ e.preventDefault(); backToZscaler(); }
  if (e.ctrlKey && e.shiftKey && (e.key.toLowerCase()==="i" || e.key.toLowerCase()==="j")){
    e.preventDefault(); backToZscaler();
  }
  if (e.ctrlKey && e.key.toLowerCase()==="u"){ e.preventDefault(); backToZscaler(); }
});
function backToZscaler(){
  document.getElementById("mainContent").style.display="none";
  document.getElementById("pinScreen").style.display="none";
  document.getElementById("termsScreen").style.display="none";
  document.querySelector(".pg.red").style.display="block";
}

  function showPage(page) {
    // Hide both pages first
    document.getElementById("soundboardPage").style.display = "none";
    document.getElementById("gamesPage").style.display = "none";

    // Show the requested page + update title
    if (page === "soundboard") {
      document.getElementById("soundboardPage").style.display = "block";
      document.title = "MyMathsHomework Version 2.12";
    } else if (page === "games") {
      document.getElementById("gamesPage").style.display = "block";
      document.title = "MyMathsHomework Version 2.12";
    }
  }
</script>
</body>
</html>

