<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>MyMathsHomework</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
/* ===== Zscaler (yours) ===== */
body {background:#e3e3e3;font-family:Arial,sans-serif;font-size:12px;color:#4B4F54;}
a {cursor:pointer;color:#009dd0;text-decoration:none;}
img {max-height:75px;max-width:430px;}
.pg{position:absolute;top:0;bottom:0;left:0;right:0;overflow-x:hidden;white-space:nowrap;}
.pg:before{content:"";display:inline-block;height:100%;vertical-align:middle;}
.pg_cont{display:inline-block;vertical-align:middle;width:100%;position:relative;}
.m_tbl{width:100%;max-width:758px;background:#e3e3e3;min-width:600px;}
.eu_h{font-size:24px;padding:20px;color:#fd4239;text-align:center;background:#fff;border-top:3px solid #fd4239;border-left:3px solid #fd4239;border-right:3px solid #fd4239;border-top-left-radius:10px;border-top-right-radius:10px;display:flex;align-items:center;gap:10px;justify-content:center;}
.eu_h .err-ico{flex:none;display:inline-block;width:30px;height:30px;}
.eu_co{background:#fff;font-size:16px;color:#2a2c30;padding:12px 18px;text-align:left;border-left:3px solid #fd4239;border-right:3px solid #fd4239;}
.eu_co.rsn{color:#000;}
.fo{background:#f3f3f3;color:#696A6D;font-size:11px;padding:8px 12px;text-align:left;border-left:3px solid #fd4239;border-right:3px solid #fd4239;border-bottom:3px solid #fd4239;border-bottom-left-radius:10px;border-bottom-right-radius:10px;}
.st{font-size:12px;color:#939393;text-align:center;margin-top:6px}

/* ===== Add CNS logo above the Zscaler panel ===== */
#cnsBanner {
  display:flex; align-items:center; justify-content:center;
  margin:0 auto 10px auto; width:100%;
}
#cnsBanner img {
  max-height:110px;           /* bigger logo like you asked */
  max-width:min(80vw, 520px);
  height:auto; width:auto;
}

/* ===== App styles ===== */
:root { --bg:#0b0f1f; --card:#111a2c; --fg:#eef3ff; --accent:#1b2a5c; --border:#1d2a55 }
#pinScreen{position:fixed;inset:0;background:var(--bg);display:none;align-items:center;justify-content:center;z-index:5;padding:18px;}
#pinBox{background:var(--card);padding:26px 30px;border-radius:18px;box-shadow:0 6px 20px rgba(0,0,0,.45);color:var(--fg);width:min(92vw,520px)}
#pinTitle{margin:0 0 12px 0;font-size:22px}
.formRow{display:flex;flex-direction:column;gap:6px;margin-bottom:10px}
.formLabel{font-size:13px;opacity:.9}
#pinInput{padding:12px 14px;font-size:18px;border-radius:10px;border:1px solid var(--border);width:100%;background:#0e1630;color:var(--fg);outline:none}
#pinInput:focus{border-color:#2a47a6;box-shadow:0 0 0 3px rgba(42,71,166,.25)}
#pinHelp{font-size:12px;opacity:.85}
#pinError{display:none;color:#ffd0d0;margin-top:6px;font-size:13px}
.btn{appearance:none;border:1px solid var(--accent);background:#17224a;color:var(--fg);padding:12px 16px;border-radius:12px;cursor:pointer;font-weight:600;font-size:15px}
.btn:hover{background:#203166}

#mainContent{display:none;max-width:1060px;margin:40px auto;padding:0 16px;color:#0b0b0b}
.card{background:#fff;border:1px solid #e5e7ef;border-radius:18px;box-shadow:0 10px 30px rgba(0,0,0,.08);padding:22px}
.tabs{display:flex;gap:10px;margin:0 0 16px 0}
.hstack{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.sound-list{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:12px}
.sound{border:1px solid #e6eaf7;border-radius:14px;padding:12px;display:flex;flex-direction:column;gap:8px}
.sound .row{display:flex;gap:10px;align-items:center;justify-content:space-between}
.sound title{font-weight:700}
audio{width:100%;height:32px}
.small{font-size:12px;color:#666}

/* Mobile niceties */
@media (max-width:640px){
  .m_tbl{min-width:auto;}
}
</style>
</head>
<body>

<!-- ===== Zscaler overlay (with BIG CNS logo above) ===== -->
<div id="zscaler-block" class="pg red">
  <div class="pg_cont">
    <div id="cnsBanner">
      <!-- Place cnslogo.png in the repo root (or change src) -->
      <img src="cnslogo.png" alt="CNS Logo" id="cnslogo">
    </div>

    <table class="m_tbl" cellpadding="0" cellspacing="0" align="center" role="presentation">
      <tr><td>
        <div class="eu_h">
          <!-- NO logo stays here only (next to the message) -->
          <svg class="err-ico" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <circle cx="12" cy="12" r="11" stroke="#fd4239" stroke-width="2" fill="none"/>
            <g stroke="#fd4239" stroke-width="2">
              <line x1="7" y1="17" x2="17" y2="7"/>
              <line x1="7" y1="7" x2="17" y2="17"/>
            </g>
          </svg>
          Sorry, you don't have permission to visit this site.
        </div>
        <div class="eu_co"><b>Website blocked</b></div>
        <div class="eu_co rsn">Not allowed the use of this Social Network site</div>
        <div class="eu_co"><a href="#" id="snapLink" class="clickable">Snapchat</a></div>
        <div class="fo">Need help? Contact our support team at 0740509750,
          <a href="mailto:servicedesk@cns.catholic.edu.au">servicedesk@cns.catholic.edu.au</a>
        </div>
      </td></tr>
    </table>
    <div class="st">Your organization has selected Zscaler to protect you from internet threats.</div>
  </div>
</div>

<!-- ===== PIN/Login (no logos here) ===== -->
<div id="pinScreen" aria-modal="true" role="dialog">
  <div id="pinBox">
    <h2 id="pinTitle">Enter PIN or Password</h2>

    <div class="formRow">
      <label class="formLabel" for="pinInput">Approved password</label>
      <input id="pinInput" type="password" maxlength="64" placeholder="••••••••" autocomplete="current-password" />
      <div id="pinHelp">Use one of the approved passwords. Press Enter to submit.</div>
      <div id="pinError">Incorrect PIN/password. Try again.</div>
    </div>

    <button class="btn" id="unlockBtn">Unlock</button>
  </div>
</div>

<!-- ===== Main Content (no NO icon here) ===== -->
<div id="mainContent">
  <div class="card">
    <h1 style="margin:0 0 12px 0">mathshomework v2</h1>

    <div class="tabs">
      <button class="btn" onclick="showPage('soundboard')">Soundboard</button>
      <button class="btn" onclick="showPage('games')">Games</button>
    </div>

    <!-- Soundboard -->
    <div id="soundboardPage">
      <div class="small" style="margin-bottom:8px">
        Host audio files in your repo (e.g. <code>/audio/...</code>) or list them in <code>soundboards.json</code>. They’ll play directly from GitHub Pages.
      </div>
      <div id="soundList" class="sound-list"></div>
    </div>

    <!-- Games -->
    <div id="gamesPage" style="display:none;">
      <div class="hstack small" style="margin-bottom:6px">Scratch demos:</div>
      <iframe src="https://scratch.mit.edu/projects/3041905/embed" allowtransparency="true" width="485" height="402" frameborder="0" scrolling="no" allowfullscreen></iframe>
      <iframe src="https://scratch.mit.edu/projects/17828009/embed" allowtransparency="true" width="485" height="402" frameborder="0" scrolling="no" allowfullscreen></iframe>
      <iframe src="https://scratch.mit.edu/projects/105500895/embed" width="485" height="402"></iframe>
      <iframe src="https://scratch.mit.edu/projects/12575620/embed" width="485" height="402"></iframe>
    </div>
  </div>
</div>

<script>
/* ================================
   CONFIG
================================== */
const VALID_PASSWORDS = [
  "14312",       // admin PIN if you want it to work still
  "24680", "13579", "school123" // add/remove as needed
];
const FALLBACK_SOUNDS = [
  { title: "Airhorn", path: "audio/airhorn.mp3" },
  { title: "Bell",    path: "audio/bell.mp3"   }
];

/* ================================
   Simple State
================================== */
let lastPassword = null;

/* ================================
   Zscaler → Login
================================== */
document.getElementById("snapLink").addEventListener("click", function(e){
  e.preventDefault();
  document.getElementById("zscaler-block").remove();
  document.getElementById("pinScreen").style.display = "flex";
});

/* ================================
   Tabs
================================== */
function showPage(which){
  document.getElementById("soundboardPage").style.display = (which==="soundboard")?"block":"none";
  document.getElementById("gamesPage").style.display = (which==="games")?"block":"none";
}

/* ================================
   Login: allowlisted passwords
================================== */
function doLogin(){
  const input = (document.getElementById("pinInput").value || "").trim();
  const ok = VALID_PASSWORDS.map(String).includes(String(input));
  const err = document.getElementById("pinError");
  if (!ok){
    err.style.display = "block";
    return;
  }
  err.style.display = "none";
  lastPassword = input;
  document.getElementById("pinScreen").style.display = "none";
  document.getElementById("mainContent").style.display = "block";
  loadSoundboard();
}
document.getElementById("unlockBtn").addEventListener("click", doLogin);
document.getElementById("pinInput").addEventListener("keydown", (e)=>{
  if (e.key === "Enter") doLogin();
});

/* ================================
   Soundboard (GitHub files)
   - Tries /soundboards.json (same origin)
   - Falls back to FALLBACK_SOUNDS
================================== */
async function loadSoundboard(){
  let list = null;
  try{
    const res = await fetch("soundboards.json", {cache:"no-store"});
    if (res.ok) list = await res.json();
  }catch(_){ }
  if (!Array.isArray(list) || !list.length) list = FALLBACK_SOUNDS;
  renderSoundList(list);
}
function renderSoundList(items){
  const wrap = document.getElementById("soundList");
  wrap.innerHTML = "";
  items.forEach((item, idx)=>{
    const card = document.createElement("div");
    card.className = "sound";

    const title = document.createElement("div");
    title.style.fontWeight = "700";
    title.textContent = item.title || ("Sound " + (idx+1));

    const audio = document.createElement("audio");
    audio.setAttribute("preload", "none");
    audio.setAttribute("controls", "");
    audio.src = item.path;

    const row = document.createElement("div");
    row.className = "row";

    const playBtn = document.createElement("button");
    playBtn.className = "btn";
    playBtn.textContent = "Play";
    playBtn.addEventListener("click", ()=>{
      document.querySelectorAll("#soundList audio").forEach(a=>{ if (a!==audio) a.pause(); });
      audio.currentTime = 0;
      audio.play();
    });

    const stopBtn = document.createElement("button");
    stopBtn.className = "btn";
    stopBtn.textContent = "Stop";
    stopBtn.addEventListener("click", ()=> audio.pause());

    row.appendChild(playBtn);
    row.appendChild(stopBtn);

    const hint = document.createElement("div");
    hint.className = "small";
    hint.textContent = item.path;

    card.appendChild(title);
    card.appendChild(audio);
    card.appendChild(row);
    card.appendChild(hint);
    wrap.appendChild(card);
  });
}

/* ================================
   Init
================================== */
window.addEventListener("DOMContentLoaded", () => {
  document.getElementById("mainContent").style.display = "none";
  document.getElementById("pinScreen").style.display = "none";
});
</script>
</body>
</html>
